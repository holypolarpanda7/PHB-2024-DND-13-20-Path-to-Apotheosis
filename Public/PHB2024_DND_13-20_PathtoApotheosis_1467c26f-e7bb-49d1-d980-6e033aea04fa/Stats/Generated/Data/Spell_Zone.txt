// ==============================================================================
// PHB 2024 DND 13-20: Path to Apotheosis - Zone Spells
// ==============================================================================

// ==============================================================================
// PRISMATIC SPRAY - Level 7 Evocation
// ==============================================================================
// PHB 2024: Eight rays of light in 60ft cone, Dex save, each target hit by random ray
// BG3 Implementation: Container spell with 5 elemental variants (Fire, Acid, Lightning, Poison, Cold)
// Player chooses which ray type to unleash in the cone

// Base container spell - provides spell selection UI
new entry "Zone_PrismaticSpray"
type "SpellData"
data "SpellType" "Zone"
data "Level" "7"
data "SpellSchool" "Evocation"
data "ContainerSpells" "Zone_PrismaticSpray_Fire;Zone_PrismaticSpray_Acid;Zone_PrismaticSpray_Lightning;Zone_PrismaticSpray_Poison;Zone_PrismaticSpray_Cold"
data "Icon" "Spell_Evocation_PrismaticSpray"
data "DisplayName" "hps0001a0000000000000000000000001;1"
data "Description" "hps0001a0000000000000000000000002;1"
data "DescriptionParams" "Distance(18);DealDamage(12d6,Fire)"
data "TooltipDamageList" "DealDamage(12d6,Fire)"
data "TooltipAttackSave" "Dexterity"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:7"
data "SpellFlags" "HasVerbalComponent;HasSomaticComponent;IsSpell;IsConcentration"
data "MemoryCost" "1"

// Fire Ray (Red)
new entry "Zone_PrismaticSpray_Fire"
type "SpellData"
data "SpellType" "Zone"
data "Level" "7"
data "SpellSchool" "Evocation"
data "SpellProperties" ""
data "SurfaceType" "Sentinel"
data "SurfaceLifetime" "0"
data "SurfaceGrowStep" "5"
data "SurfaceGrowInterval" "10"
data "SpellRoll" "not SavingThrow(Ability.Dexterity, SourceSpellDC())"
data "SpellSuccess" "DealDamage(12d6,Fire,Magical)"
data "SpellFail" "DealDamage((12d6)/2,Fire,Magical)"
data "TargetConditions" "not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally()) and not Tagged('INVISIBLE_HELPER')"
data "Icon" "Spell_Evocation_PrismaticSpray"
data "DisplayName" "hps0002a0000000000000000000000001;1"
data "Description" "hps0002a0000000000000000000000002;1"
data "DescriptionParams" "Distance(18);DealDamage(12d6,Fire)"
data "TooltipDamageList" "DealDamage(12d6,Fire)"
data "TooltipAttackSave" "Dexterity"
data "TooltipOnSave" "f762efbb-f8f1-493e-b248-2de1567b4bd2"
data "CastSound" "Spell_Cast_Damage_Fire_Fireball_L3"
data "TargetSound" "Spell_Impact_Damage_Fire_Fireball_L3"
data "CastTextEvent" "Cast"
data "Shape" "Cone"
data "Range" "18"
data "Angle" "60"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:7"
data "SpellAnimation" "554a18f7-952e-494a-b301-7702a85d4bc9,,;,,;5e7e63e1-0e69-46e7-ade7-fe3dadcc9184,,;e9ad50df-e7f1-43a0-b782-4c08f92b0f5a,,;22dfbbf4-f417-4c84-b39e-2039315961e6,,;,,;5bfbe9f9-4fc3-4f26-b112-43d404db6a89,,;,,;,,"
data "VerbalIntent" "Damage"
data "SpellFlags" "HasVerbalComponent;HasSomaticComponent;IsHarmful;IsSpell"
data "PrepareEffect" "2fa6b127-6f8a-4150-8be6-6f62b7a85911"
data "CastEffect" "bdb57e34-f30a-4369-b337-77f93933cf71"
data "TargetEffect" "48d608a9-af9e-40e3-a978-e460c8dd3a95"
data "DamageType" "Fire"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "7"

// Acid Ray (Orange)
new entry "Zone_PrismaticSpray_Acid"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Fire"
data "SpellSuccess" "DealDamage(12d6,Acid,Magical)"
data "SpellFail" "DealDamage((12d6)/2,Acid,Magical)"
data "DisplayName" "hps0003a0000000000000000000000001;1"
data "Description" "hps0003a0000000000000000000000002;1"
data "DescriptionParams" "Distance(18);DealDamage(12d6,Acid)"
data "TooltipDamageList" "DealDamage(12d6,Acid)"
data "CastSound" "Spell_Cast_Damage_Acid_AcidSplash_L0"
data "TargetSound" "Spell_Impact_Damage_Acid_AcidSplash_L0"
data "DamageType" "Acid"

// Lightning Ray (Yellow)
new entry "Zone_PrismaticSpray_Lightning"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Fire"
data "SpellSuccess" "DealDamage(12d6,Lightning,Magical)"
data "SpellFail" "DealDamage((12d6)/2,Lightning,Magical)"
data "DisplayName" "hps0004a0000000000000000000000001;1"
data "Description" "hps0004a0000000000000000000000002;1"
data "DescriptionParams" "Distance(18);DealDamage(12d6,Lightning)"
data "TooltipDamageList" "DealDamage(12d6,Lightning)"
data "CastSound" "Spell_Cast_Damage_Lightning_LightningBolt_L3"
data "TargetSound" "Spell_Impact_Damage_Lightning_LightningBolt_L3"
data "DamageType" "Lightning"

// Poison Ray (Green)
new entry "Zone_PrismaticSpray_Poison"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Fire"
data "SpellSuccess" "DealDamage(12d6,Poison,Magical)"
data "SpellFail" "DealDamage((12d6)/2,Poison,Magical)"
data "DisplayName" "hps0005a0000000000000000000000001;1"
data "Description" "hps0005a0000000000000000000000002;1"
data "DescriptionParams" "Distance(18);DealDamage(12d6,Poison)"
data "TooltipDamageList" "DealDamage(12d6,Poison)"
data "CastSound" "Spell_Cast_Damage_Poison_PoisonSpray_L0"
data "TargetSound" "Spell_Impact_Damage_Poison_PoisonSpray_L0"
data "DamageType" "Poison"

// Cold Ray (Blue)
new entry "Zone_PrismaticSpray_Cold"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Fire"
data "SpellSuccess" "DealDamage(12d6,Cold,Magical)"
data "SpellFail" "DealDamage((12d6)/2,Cold,Magical)"
data "DisplayName" "hps0006a0000000000000000000000001;1"
data "Description" "hps0006a0000000000000000000000002;1"
data "DescriptionParams" "Distance(18);DealDamage(12d6,Cold)"
data "TooltipDamageList" "DealDamage(12d6,Cold)"
data "CastSound" "Spell_Cast_Damage_Ice_ConeOfCold_L4to5"
data "TargetSound" "Spell_Impact_Damage_Ice_ConeOfCold_L4to5"
data "DamageType" "Cold"

// ==============================================================================
// Prismatic Spray - Upcast Versions (Level 8)
// ==============================================================================
new entry "Zone_PrismaticSpray_8"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray"
data "ContainerSpells" "Zone_PrismaticSpray_Fire_8;Zone_PrismaticSpray_Acid_8;Zone_PrismaticSpray_Lightning_8;Zone_PrismaticSpray_Poison_8;Zone_PrismaticSpray_Cold_8"
data "DescriptionParams" "Distance(18);DealDamage(14d6,Fire)"
data "TooltipDamageList" "DealDamage(14d6,Fire)"
data "TooltipUpcastDescription" "66388a6f-44dd-4c9f-a9e7-910c50e70755"
data "TooltipUpcastDescriptionParams" "DealDamage(2d6,Fire)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:8"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "8"

new entry "Zone_PrismaticSpray_Fire_8"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Fire"
data "SpellSuccess" "DealDamage(14d6,Fire,Magical)"
data "SpellFail" "DealDamage((14d6)/2,Fire,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(14d6,Fire)"
data "TooltipDamageList" "DealDamage(14d6,Fire)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:8"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "8"

new entry "Zone_PrismaticSpray_Acid_8"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Acid"
data "SpellSuccess" "DealDamage(14d6,Acid,Magical)"
data "SpellFail" "DealDamage((14d6)/2,Acid,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(14d6,Acid)"
data "TooltipDamageList" "DealDamage(14d6,Acid)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:8"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "8"

new entry "Zone_PrismaticSpray_Lightning_8"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Lightning"
data "SpellSuccess" "DealDamage(14d6,Lightning,Magical)"
data "SpellFail" "DealDamage((14d6)/2,Lightning,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(14d6,Lightning)"
data "TooltipDamageList" "DealDamage(14d6,Lightning)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:8"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "8"

new entry "Zone_PrismaticSpray_Poison_8"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Poison"
data "SpellSuccess" "DealDamage(14d6,Poison,Magical)"
data "SpellFail" "DealDamage((14d6)/2,Poison,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(14d6,Poison)"
data "TooltipDamageList" "DealDamage(14d6,Poison)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:8"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "8"

new entry "Zone_PrismaticSpray_Cold_8"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Cold"
data "SpellSuccess" "DealDamage(14d6,Cold,Magical)"
data "SpellFail" "DealDamage((14d6)/2,Cold,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(14d6,Cold)"
data "TooltipDamageList" "DealDamage(14d6,Cold)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:8"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "8"

// ==============================================================================
// Prismatic Spray - Upcast Versions (Level 9)
// ==============================================================================
new entry "Zone_PrismaticSpray_9"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray"
data "ContainerSpells" "Zone_PrismaticSpray_Fire_9;Zone_PrismaticSpray_Acid_9;Zone_PrismaticSpray_Lightning_9;Zone_PrismaticSpray_Poison_9;Zone_PrismaticSpray_Cold_9"
data "DescriptionParams" "Distance(18);DealDamage(16d6,Fire)"
data "TooltipDamageList" "DealDamage(16d6,Fire)"
data "TooltipUpcastDescription" "66388a6f-44dd-4c9f-a9e7-910c50e70755"
data "TooltipUpcastDescriptionParams" "DealDamage(2d6,Fire)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:9"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "9"

new entry "Zone_PrismaticSpray_Fire_9"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Fire"
data "SpellSuccess" "DealDamage(16d6,Fire,Magical)"
data "SpellFail" "DealDamage((16d6)/2,Fire,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(16d6,Fire)"
data "TooltipDamageList" "DealDamage(16d6,Fire)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:9"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "9"

new entry "Zone_PrismaticSpray_Acid_9"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Acid"
data "SpellSuccess" "DealDamage(16d6,Acid,Magical)"
data "SpellFail" "DealDamage((16d6)/2,Acid,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(16d6,Acid)"
data "TooltipDamageList" "DealDamage(16d6,Acid)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:9"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "9"

new entry "Zone_PrismaticSpray_Lightning_9"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Lightning"
data "SpellSuccess" "DealDamage(16d6,Lightning,Magical)"
data "SpellFail" "DealDamage((16d6)/2,Lightning,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(16d6,Lightning)"
data "TooltipDamageList" "DealDamage(16d6,Lightning)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:9"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "9"

new entry "Zone_PrismaticSpray_Poison_9"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Poison"
data "SpellSuccess" "DealDamage(16d6,Poison,Magical)"
data "SpellFail" "DealDamage((16d6)/2,Poison,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(16d6,Poison)"
data "TooltipDamageList" "DealDamage(16d6,Poison)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:9"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "9"

new entry "Zone_PrismaticSpray_Cold_9"
type "SpellData"
data "SpellType" "Zone"
using "Zone_PrismaticSpray_Cold"
data "SpellSuccess" "DealDamage(16d6,Cold,Magical)"
data "SpellFail" "DealDamage((16d6)/2,Cold,Magical)"
data "DescriptionParams" "Distance(18);DealDamage(16d6,Cold)"
data "TooltipDamageList" "DealDamage(16d6,Cold)"
data "UseCosts" "ActionPoint:1;SpellSlotsGroup:1:1:9"
data "RootSpellID" "Zone_PrismaticSpray"
data "PowerLevel" "9"

// ==============================================================================
// OTHER ZONE SPELLS
// ==============================================================================

// Wild Magic Lightning Bolt - Auto-targets closest enemy
new entry "Zone_LightningBolt_WildMagic"
type "SpellData"
data "SpellType" "Zone"
using "Zone_LightningBolt"
data "SpellRoll" "not SavingThrow(Ability.Dexterity, 8 + ProficiencyBonus())"
data "SpellSuccess" "DealDamage(8d6,Lightning,Magical)"
data "SpellFail" "DealDamage((8d6)/2, Lightning,Magical)"
data "Icon" "Spell_Evocation_LightningBolt"
data "DisplayName" "hcc11111111111111111111111111d025;1"
data "Description" "hcc11111111111111111111111111d026;1"
data "UseCosts" ""
data "SpellFlags" "IsSpell;IsHarmful;CanAreaDamageEvade;ImmediateCast"
data "SpellAnimation" ",,;,,;,,;,,;,,;,,;,,;,,;,,"

